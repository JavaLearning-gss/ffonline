(window.webpackJsonpmbapp=window.webpackJsonpmbapp||[]).push([[0],{116:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var n,o,s,r,i,l,c,d,p,u,m,f,g=a(0),h=a.n(g),v=a(42),y=a.n(v),b=a(16),w=a(25),j=a(27),k=a(26),E=a(28),O=a(24),M=a(33),_=a(9),R=a(17),N=(n=Object(R.c)(),o=Object(_.b)("store"),Object(M.f)(s=n(s=o(s=Object(_.c)(s=function(e){function t(){return Object(b.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(w.a)(t,[{key:"setLang",value:function(e){this.props.i18n.changeLanguage(e)}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,h.a.createElement("span",{className:"pointer",onClick:function(){return e.setLang("zh-cn")}},"\u4e2d\u6587")," \xb7 ",h.a.createElement("span",{className:"pointer",onClick:function(){return e.setLang("en")}},"English"))}}]),t}(g.Component))||s)||s)||s)||s),B=a(38),L=a.n(B),T=(r=Object(R.c)(),i=Object(_.b)("store"),Object(M.f)(l=r(l=i(l=Object(_.c)(l=function(e){function t(){return Object(b.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.t,t=h.a.createElement("div",{className:"box"},h.a.createElement("div",{className:"title"},e("Welcome")),h.a.createElement("div",{className:"lang"}," ",h.a.createElement(N,null)));return h.a.createElement(L.a,{title:this.props.store.appname},t)}}]),t}(g.Component))||l)||l)||l)||l),A=a(40),P=a.n(A),S=a(129),C=a(128),U=a(45),W=a.n(U),x=(c=Object(R.c)(),d=Object(_.b)("store"),Object(M.f)(p=c(p=d(p=Object(_.c)(p=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(j.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).state={download_url:!1,show_loading:!1},a}return Object(E.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.workerPath=location.href.replace(location.href.split("/").pop(),"")+"ffmpeg_all.js",this.buffersReady=!1,this.workerReady=!1,this.posted=!1,this.worker=!1}},{key:"processInWebWorker",value:function(){var e=URL.createObjectURL(new Blob(['\n        importScripts("'.concat(this.workerPath,'");\n        var now = Date.now;\n        function print(text) \n        {\n            postMessage({"type" : "stdout","data" : text});};\n            onmessage = function(event)\n            {\n                var message = event.data;\n                if (message.type === "command") \n                {\n                    var Module = {print: print,printErr: print,files: message.files || [],arguments: message.arguments || [],TOTAL_MEMORY: 943718400};\n                    \n                    postMessage({"type" : "start","data" : Module.arguments.join(" ")});\n                    \n                    postMessage({"type" : "stdout","data" : "Received command: " +Module.arguments.join(" ") +((Module.TOTAL_MEMORY) ? ".  Processing with " + Module.TOTAL_MEMORY + " bits." : "")});var time = now();var result = ffmpeg_run(Module);var totalTime = now() - time;postMessage({"type" : "stdout","data" : "Finished processing (took " + totalTime + "ms)"});postMessage({"type" : "done","data" : result,"time" : totalTime});}};postMessage({"type" : "ready"});')],{type:"application/javascript"})),t=new Worker(e);return URL.revokeObjectURL(e),t}},{key:"cover_uploaded",value:function(e){var t=e[0];this.coverBlob=new Blob([t],{type:"image/jpeg"}),console.log(t)}},{key:"audio_uploaded",value:function(e){var t=e[0];this.audioBlob=new Blob([t],{type:"audio/mp3"}),console.log(t)}},{key:"convert",value:function(){var e=this;this.setState({show_loading:!0});var t=new FileReader;t.onload=function(t){console.log(t),e.cover_data=t.target.result,e.audio_data&&(e.buffersReady=!0),e.buffersReady&&e.workerReady&&!e.posted&&e.postMessage()};var a=new FileReader;a.onload=function(t){e.audio_data=t.target.result,e.cover_data&&(e.buffersReady=!0),e.buffersReady&&e.workerReady&&!e.posted&&e.postMessage()},t.readAsArrayBuffer(this.coverBlob),a.readAsArrayBuffer(this.audioBlob),this.worker||(this.worker=this.processInWebWorker()),this.worker.onmessage=function(t){var a=t.data;if("ready"==a.type)F('<a href="'+e.workerPath+'" download="ffmpeg-asm.js">ffmpeg-asm.js</a> file has been loaded.'),e.workerReady=!0,e.buffersReady?e.postMessage():console.log("buffer is not ready");else if("stdout"==a.type)F(a.data);else if("start"==a.type)e.setState({show_loading:!0}),F('<a href="'+e.workerPath+'" download="ffmpeg-asm.js">ffmpeg-asm.js</a> file received ffmpeg command.');else if("done"==a.type){console.log(JSON.stringify(a));var n=a.data[0];console.log(JSON.stringify(n));var o=new Blob([n.data],{type:"video/mp4"});e.PostBlob(o)}}}},{key:"postMessage",value:function(){console.log("in  post message"),this.posted=!0,this.worker.postMessage({type:"command",arguments:["-loop","1","-i","cover.jpg","-i","audio.mp3","-q:v","1","-c:a","aac","-b:v","1450k","-b:a","96k","-bf","2","-g","90","-sc_threshold","0","-ar","32000","-strict","-2","-shortest","output.mp4"],files:[{data:new Uint8Array(this.cover_data),name:"cover.jpg",type:"image/jpeg"},{data:new Uint8Array(this.audio_data),name:"audio.mp3",type:"audio/mp3"}]})}},{key:"PostBlob",value:function(e){W()(e,"merged.mp4"),this.posted=!1,this.setState({show_loading:!1}),console.log("done")}},{key:"render",value:function(){var e=this,t=h.a.createElement("div",null,h.a.createElement("div",{className:" center-800 top-100"},h.a.createElement("h1",null,"jpg + mp3 \u5408\u6210 mp4"),h.a.createElement("div",{className:"oneline"},h.a.createElement("div",{className:"left"}," ",h.a.createElement(P.a,{fileTypes:[".jpg"],handleFiles:function(t){return e.cover_uploaded(t)}},h.a.createElement(S.a,{large:!0,icon:"media"},"\u9009\u62e9\u4e00\u5f20jpg\u56fe\u7247"))),h.a.createElement("div",{className:"middle"},h.a.createElement(P.a,{fileTypes:[".mp3"],handleFiles:function(t){return e.audio_uploaded(t)}},h.a.createElement(S.a,{large:!0,icon:"music"},"\u9009\u62e9\u4e00\u4e2amp3"))),h.a.createElement("div",{className:"right"},h.a.createElement(S.a,{large:!0,icon:"build",onClick:function(){return e.convert()}},"\u5f00\u59cb\u5408\u6210"))),h.a.createElement("div",{className:"row center-800 top-20"},this.state.show_loading&&h.a.createElement(C.a,null)),h.a.createElement("div",{className:"row center-800"},this.state.download_url&&h.a.createElement("a",{href:this.state.download_url},"Download Recorded Audio+Canvas file in MP4 container and play in VLC player!")),h.a.createElement("div",{className:"link top-20"},h.a.createElement(O.b,{to:"/t2"},"\u4e24\u4e2amp4\u5408\u6210\u4e00\u4e2a"))));return h.a.createElement(L.a,{title:this.props.store.appname},t)}}]),t}(g.Component))||p)||p)||p)||p);function F(e){console.log(e)}var J=(u=Object(R.c)(),m=Object(_.b)("store"),Object(M.f)(f=u(f=m(f=Object(_.c)(f=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(j.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).state={download_url:!1,show_loading:!1},a}return Object(E.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.workerPath=location.href.replace(location.href.split("/").pop(),"")+"ffmpeg_all.js",this.buffersReady=!1,this.workerReady=!1,this.posted=!1,this.worker=!1}},{key:"processInWebWorker",value:function(){var e=URL.createObjectURL(new Blob(['\n        importScripts("'.concat(this.workerPath,'");\n        var now = Date.now;\n        function print(text) \n        {\n            postMessage({"type" : "stdout","data" : text});};\n            onmessage = function(event)\n            {\n                var message = event.data;\n                if (message.type === "command") \n                {\n                    var Module = {print: print,printErr: print,files: message.files || [],arguments: message.arguments || [],TOTAL_MEMORY: 943718400};\n                    \n                    postMessage({"type" : "start","data" : Module.arguments.join(" ")});\n                    \n                    postMessage({"type" : "stdout","data" : "Received command: " +Module.arguments.join(" ") +((Module.TOTAL_MEMORY) ? ".  Processing with " + Module.TOTAL_MEMORY + " bits." : "")});var time = now();var result = ffmpeg_run(Module);var totalTime = now() - time;postMessage({"type" : "stdout","data" : "Finished processing (took " + totalTime + "ms)"});postMessage({"type" : "done","data" : result,"time" : totalTime});}};postMessage({"type" : "ready"});')],{type:"application/javascript"})),t=new Worker(e);return URL.revokeObjectURL(e),t}},{key:"ts1_uploaded",value:function(e){var t=e[0];this.ts1Blob=new Blob([t],{type:"video/mp2t"}),console.log(t)}},{key:"ts2_uploaded",value:function(e){var t=e[0];this.ts2Blob=new Blob([t],{type:"video/mp2t"}),console.log(t)}},{key:"convert",value:function(){var e=this;this.setState({show_loading:!0});var t=new FileReader;t.onload=function(t){console.log(t),e.ts1_data=t.target.result,e.ts2_data&&(e.buffersReady=!0),e.buffersReady&&e.workerReady&&!e.posted&&e.postMessage()};var a=new FileReader;a.onload=function(t){e.ts2_data=t.target.result,e.ts1_data&&(e.buffersReady=!0),e.buffersReady&&e.workerReady&&!e.posted&&e.postMessage()},t.readAsArrayBuffer(this.ts1Blob),a.readAsArrayBuffer(this.ts2Blob),this.worker||(this.worker=this.processInWebWorker()),this.worker.onmessage=function(t){var a=t.data;if("ready"==a.type)D('<a href="'+e.workerPath+'" download="ffmpeg-asm.js">ffmpeg-asm.js</a> file has been loaded.'),e.workerReady=!0,e.buffersReady?e.postMessage():console.log("buffer is not ready");else if("stdout"==a.type);else if("start"==a.type)e.setState({show_loading:!0}),D('<a href="'+e.workerPath+'" download="ffmpeg-asm.js">ffmpeg-asm.js</a> file received ffmpeg command.');else if("done"==a.type){console.log(JSON.stringify(a));var n=a.data[0];console.log(JSON.stringify(n));var o=new Blob([n.data],{type:"video/mp4"});console.log(JSON.stringify(o)),e.PostBlob(o)}}}},{key:"postMessage",value:function(){console.log("in  post message"),this.posted=!0,this.worker.postMessage({type:"command",arguments:["-safe","0","-f","concat","-i","list.txt","-c:v","libx264","-vf","pad=ceil(iw/2)*2:ceil(ih/2)*2","-strict","-2","output.mp4"],files:[{data:new Uint8Array(this.ts1_data),name:"ts1.mp4"},{data:new Uint8Array(this.ts2_data),name:"ts2.mp4"},{data:(new TextEncoder).encode("file ts1.mp4\r\nfile ts2.mp4"),name:"list.txt"}]})}},{key:"PostBlob",value:function(e){W()(e,"all.mp4"),this.setState({show_loading:!1}),console.log("done")}},{key:"render",value:function(){var e=this,t=h.a.createElement("div",null,h.a.createElement("div",{className:" center-800 top-100"},h.a.createElement("h1",null,"\u4e24\u4e2a mp4 \u5408\u6210\u4e00\u4e2a"),h.a.createElement("div",{className:"oneline"},h.a.createElement("div",{className:"left"}," ",h.a.createElement(P.a,{fileTypes:[".mp4"],handleFiles:function(t){return e.ts1_uploaded(t)}},h.a.createElement(S.a,{large:!0,icon:"video"},"\u9009\u62e9\u4e00\u4e2aMP4"))),h.a.createElement("div",{className:"middle"},h.a.createElement(P.a,{fileTypes:[".mp4"],handleFiles:function(t){return e.ts2_uploaded(t)}},h.a.createElement(S.a,{large:!0,icon:"video"},"\u518d\u9009\u62e9\u4e00\u4e2a\u540c\u6837\u5206\u8fa8\u7387\u7684MP4"))),h.a.createElement("div",{className:"right"},h.a.createElement(S.a,{large:!0,icon:"build",onClick:function(){return e.convert()}},"\u5f00\u59cb\u5408\u6210"))),h.a.createElement("div",{className:"row center-800 top-20"},this.state.show_loading&&h.a.createElement(C.a,null)),h.a.createElement("div",{className:"row center-800"},this.state.download_url&&h.a.createElement("a",{href:this.state.download_url},"Download Recorded Audio+Canvas file in MP4 container and play in VLC player!")),h.a.createElement("div",{className:"link top-20"},h.a.createElement(O.b,{to:"/"},"jpg + mp3\u5408\u6210 mp4"))));return h.a.createElement(L.a,{title:this.props.store.appname},t)}}]),t}(g.Component))||f)||f)||f)||f);function D(e){console.log(e)}var Y=function(e){function t(){return Object(b.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return h.a.createElement(O.a,null,h.a.createElement(M.c,null,h.a.createElement(M.a,{path:"/t2",component:J}),h.a.createElement(M.a,{path:"/",component:x}),h.a.createElement(M.a,{path:"/Login",component:T})))}}]),t}(g.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I,z,V=a(67),q=a(68),H=(a(99),a(2)),K=a(50),$=a.n(K),G=new(I=function e(){Object(b.a)(this,e),Object(V.a)(this,"appname",z,this)},z=Object(q.a)(I.prototype,"appname",[H.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"EasyStarter"}}),I),Q=(a(116),a(53)),X=a(69),Z=a(70),ee=a.n(Z);Q.a.use(X.a).use(ee.a).use(R.b).init({fallbackLng:"zh-cn",ns:["translations"],defaultNS:"translations",debug:!1,saveMissing:!1,missingKeyHandler:function(e,t,a){var n=new URLSearchParams;n.append("lng",JSON.stringify(e)),n.append("ns",t),n.append("key",a);$.a.post("http://localhost:8088/misswords",n).data},interpolation:{escapeValue:!1},react:{wait:!0}});var te=Q.a;y.a.render(h.a.createElement(_.a,{store:G},h.a.createElement(R.a,{i18n:te},h.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,a){e.exports=a(126)}},[[77,1,2]]]);
//# sourceMappingURL=main.54787058.chunk.js.map